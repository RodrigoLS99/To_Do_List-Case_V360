<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  
  <div class="mb-6">
    <%= link_to todo_lists_path, class: "text-gray-500 hover:text-blue-600 flex items-center gap-1 text-sm font-medium transition" do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
      Voltar para Minhas Listas
    <% end %>
  </div>

  <div class="bg-white rounded-t-xl shadow-sm border border-gray-200 p-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
    
    <div>
      <h1 class="text-3xl font-bold text-gray-900 flex items-center gap-2">
        ğŸ“ <%= @todo_list.title %>
      </h1>
      <p class="text-sm text-gray-500 mt-1 ml-1">
        Criada em <%= @todo_list.created_at.strftime("%d/%m/%Y") %>
      </p>
    </div>

    <div class="flex items-center gap-2">
      <%= link_to edit_todo_list_path(@todo_list), class: "px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition text-sm flex items-center gap-2" do %>
        <span>âœï¸</span> Editar
      <% end %>

      <%= button_to @todo_list, method: :delete, form: { data: { turbo_confirm: "Tem certeza que deseja apagar esta lista e todas as tarefas dela?" } }, class: "px-4 py-2 bg-red-50 border border-red-100 text-red-600 font-medium rounded-lg hover:bg-red-100 transition text-sm flex items-center gap-2 cursor-pointer" do %>
        <span>ğŸ—‘ï¸</span> Apagar
      <% end %>
    </div>
  </div>

  <div class="bg-gray-50 border-x border-b border-gray-200 rounded-b-xl p-6 min-h-[300px]">
    
    <div id="tasks" class="space-y-3 mb-8">
      <% @todo_list.tasks.each do |task| %>
        <% if task.persisted? %>
          <div class="flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border border-gray-100 group transition hover:border-blue-300 <%= 'opacity-60 bg-gray-50' if task.completed_at? %>">
            
            <div class="flex items-center gap-3">
              <% if task.completed_at? %>
                
                <%= button_to complete_todo_list_task_path(@todo_list, task), method: :patch, class: "w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center border border-green-200 hover:bg-green-200 cursor-pointer transition", title: "Reabrir tarefa" do %>
                  âœ“
                <% end %>
                
                <span class="text-gray-400 line-through decoration-gray-400"><%= task.content %></span>

              <% else %>
                
                <%= button_to complete_todo_list_task_path(@todo_list, task), method: :patch, class: "w-6 h-6 rounded-full border-2 border-gray-300 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition flex-shrink-0", title: "Marcar como concluÃ­do" do %>
                <% end %>
                
                <span class="text-gray-800 font-medium"><%= task.content %></span>
              
              <% end %>
            </div>

            <%= button_to "Ã—", todo_list_task_path(@todo_list, task), method: :delete, class: "text-gray-300 hover:text-red-600 font-bold text-2xl px-2 cursor-pointer opacity-0 group-hover:opacity-100 transition leading-none pb-1", title: "Excluir tarefa" %>
          </div>
        <% end %>
      <% end %>
      
      <% if @todo_list.tasks.none?(&:persisted?) %>
        <p class="text-center text-gray-400 py-4 italic text-sm">Nenhuma tarefa criada ainda.</p>
      <% end %>
    </div>

    <%= form_with(model: [@todo_list, @todo_list.tasks.build], class: "flex gap-3") do |f| %>
      <%= f.text_field :content, placeholder: "O que precisa ser feito?", class: "flex-1 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 py-3 px-4 outline-none", required: true, autocomplete: "off" %>
      
      <%= f.submit "Adicionar +", class: "bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow-sm transition cursor-pointer" %>
    <% end %>

  </div>

</div>